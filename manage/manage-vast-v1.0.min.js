var manageVastPlayer={video_container:null,video_player:null,vast_url:"",vast_data:"",vast_click_url:"#",vast_obj:{},addMeta:function(){var a=document.querySelector("meta[name=viewport]"),c="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0";
if(a===null){var b=document.head||document.getElementsByTagName("head")[0];a=document.createElement("meta");a.setAttribute("name","viewport");b.appendChild(a);
}a.setAttribute("content",c);},addCss:function(d){var a=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style"),c;b.type="text/css",c="*{margin:0;padding:0}body{background-color:#000}";
if(d){c+="#"+d+"{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}";}b.innerHTML=c;a.appendChild(b);
},parseVast:function(){vast_url=this.vast_url;vast_data=this.vast_data;var g=Math.random().toString(16).slice(2);vast_url=vast_url.replace("[timestamp]",g);
var u,m;if(window.XMLHttpRequest){u=new XMLHttpRequest();}else{u=new ActiveXObject("Microsoft.XMLHTTP");}u.open("GET",vast_url,false);u.send();m=u.responseXML;
if(!m){return;}var a={};var D=m.getElementsByTagName("Impression");if(D!=null){a.impression=D;}var w=m.getElementsByTagName("Creative");var h;var r;for(var A=0;
A<w.length;A++){var e=w[A].getElementsByTagName("Linear");if(e!=null){for(var z=0;z<e.length;z++){var c=e[z].getElementsByTagName("MediaFiles");if(c!=null){for(var y=0;
y<c.length;y++){var I=c[y].getElementsByTagName("MediaFile");if(I!=null){h=I;}}}var f=e[z].getElementsByTagName("VideoClicks");if(f!=null){for(var y=0;
y<f.length;y++){var J=f[y].getElementsByTagName("ClickThrough")[0].childNodes[0].nodeValue;var d=f[y].getElementsByTagName("ClickTracking");if(J!=null){a.clickthrough_url=J;
}if(d!=null){a.clickthrough_tracking=d;}}}var H=e[z].getElementsByTagName("TrackingEvents");if(H!=null){for(var y=0;y<H.length;y++){var o=H[y].getElementsByTagName("Tracking");
if(o!=null){r=o;}}}var G=e[z].getElementsByTagName("Duration")[0];if(G!=null){a.duration=G.childNodes[0].nodeValue;var C=a.duration.split(":");var t=(+C[0])*60*60+(+C[1])*60+(+C[2]);
a.duration=t;}}}var b=w[A].getElementsByTagName("CompanionAds");if(b!=null){var B=w[A].getElementsByTagName("Companion");if(B!=null){for(var z=0;z<B.length;
z++){var v=B[z].getAttribute("width")||null;var s=B[z].getAttribute("height")||null;var q=B[z].getElementsByTagName("StaticResource");for(var y=0;y<q.length;
y++){if(q[y].childNodes[0].nodeValue){a.static_end_card=q[y].childNodes[0].nodeValue;if(v){a.static_end_card_width=B[z].getAttribute("width");}if(s){a.static_end_card_height=B[z].getAttribute("height");
}break;}}var n=B[z].getElementsByTagName("TrackingEvents");for(var y=0;y<n.length;y++){var F=n[y].getElementsByTagName("Tracking");for(var x=0;x<F.length;
x++){if(F[x].getAttribute("event")=="creativeView"){a.end_card_impression=F[x].childNodes[0].nodeValue;}}}var p=B[z].getElementsByTagName("CompanionClickThrough");
for(var y=0;y<p.length;y++){if(p[y].childNodes[0].nodeValue){a.end_card_clickthrough_url=p[y].childNodes[0].nodeValue;break;}}var E=B[z].getElementsByTagName("HTMLResource");
for(var y=0;y<E.length;y++){if(E[y].childNodes[0].nodeValue){a.html_end_card=E[y].childNodes[0].nodeValue;if(v){a.html_end_card_width=B[z].getAttribute("width");
}if(s){a.html_end_card_height=B[z].getAttribute("height");}break;}}}}}}for(var A=0;A<h.length;A++){if(h[A].getAttribute("type")=="video/mp4"){a.media_file_mp4=h[A].childNodes[0].nodeValue;
}if(h[A].getAttribute("type")=="video/webm"){a.media_file_webm=h[A].childNodes[0].nodeValue;}}for(var A=0;A<r.length;A++){if(r[A].getAttribute("event")=="creativeView"){if(a.tracking_creative_view!=null){a.tracking_creative_view+="|"+r[A].childNodes[0].nodeValue;
}else{a.tracking_creative_view=r[A].childNodes[0].nodeValue;}if(vast_data.creativeView){a.tracking_creative_view+="|"+vast_data.creativeView;}a.tracking_creative_view_tracked=false;
}if(r[A].getAttribute("event")=="start"){if(a.tracking_start!=null){a.tracking_start+="|"+r[A].childNodes[0].nodeValue;}else{a.tracking_start=r[A].childNodes[0].nodeValue;
}a.tracking_start_tracked=false;}if(r[A].getAttribute("event")=="firstQuartile"){if(a.tracking_first_quartile!=null){a.tracking_first_quartile+="|"+r[A].childNodes[0].nodeValue;
}else{a.tracking_first_quartile=r[A].childNodes[0].nodeValue;}if(vast_data.firstQuartile){a.tracking_first_quartile+="|"+vast_data.firstQuartile;}a.tracking_first_quartile_tracked=false;
}if(r[A].getAttribute("event")=="midpoint"){if(a.tracking_midpoint!=null){a.tracking_midpoint+="|"+r[A].childNodes[0].nodeValue;}else{a.tracking_midpoint=r[A].childNodes[0].nodeValue;
}if(vast_data.midpoint){a.tracking_midpoint+="|"+vast_data.midpoint;}a.tracking_midpoint_tracked=false;}if(r[A].getAttribute("event")=="thirdQuartile"){if(a.tracking_third_quartile!=null){a.tracking_third_quartile+=" "+r[A].childNodes[0].nodeValue;
}else{a.tracking_third_quartile=r[A].childNodes[0].nodeValue;}if(vast_data.thirdQuartile){a.tracking_third_quartile+="|"+vast_data.thirdQuartile;}a.tracking_third_quartile_tracked=false;
}if(r[A].getAttribute("event")=="complete"){if(a.tracking_complete!=null){a.tracking_complete+="|"+r[A].childNodes[0].nodeValue;}else{a.tracking_complete=r[A].childNodes[0].nodeValue;
}if(vast_data.complete){a.tracking_complete+="|"+vast_data.complete;}a.tracking_complete_tracked=false;}if(r[A].getAttribute("event")=="mute"){if(a.tracking_mute!=null){a.tracking_mute+="|"+r[A].childNodes[0].nodeValue;
}else{a.tracking_mute=r[A].childNodes[0].nodeValue;}a.tracking_mute_tracked=false;}if(r[A].getAttribute("event")=="unmute"){if(a.tracking_unmute!=null){a.tracking_unmute+="|"+r[A].childNodes[0].nodeValue;
}else{a.tracking_unmute=r[A].childNodes[0].nodeValue;}a.tracking_unmute_tracked=false;}if(r[A].getAttribute("event")=="pause"){if(a.tracking_pause!=null){a.tracking_pause+="|"+r[A].childNodes[0].nodeValue;
}else{a.tracking_pause=r[A].childNodes[0].nodeValue;}a.tracking_pause_tracked=false;}if(r[A].getAttribute("event")=="resume"){if(a.tracking_resume!=null){a.tracking_resume+="|"+r[A].childNodes[0].nodeValue;
}else{a.tracking_resume=r[A].childNodes[0].nodeValue;}a.tracking_resume_tracked=false;}if(r[A].getAttribute("event")=="fullscreen"){if(a.tracking_fullscreen!=null){a.tracking_fullscreen+="|"+r[A].childNodes[0].nodeValue;
}else{a.tracking_fullscreen=r[A].childNodes[0].nodeValue;}a.tracking_fullscreen_tracked=false;}}manageVastPlayer.vast_obj=a;window.dispatchEvent(this.vastLoadEvent);
},timeUpdate:function(d){var f=manageVastPlayer.vast_obj;var a=manageVastPlayer.video_player;var e=new Image();var g=Math.floor(a.currentTime);if((g==0)){if(f.tracking_start_tracked==false){if(f.tracking_start!=null){var c=f.tracking_start.split("|");
for(var b=0;b<c.length;b++){var e=new Image();e.src=c[b];}}f.tracking_start_tracked=true;}}if((g==(Math.floor(f.duration/4)))){if(f.tracking_first_quartile_tracked==false){if(f.tracking_first_quartile!=null){var c=f.tracking_first_quartile.split("|");
for(var b=0;b<c.length;b++){var e=new Image();e.src=c[b];}}f.tracking_first_quartile_tracked=true;}}if((g==(Math.floor(f.duration/2)))){if(f.tracking_midpoint_tracked==false){if(f.tracking_midpoint!=null){var c=f.tracking_midpoint.split("|");
for(var b=0;b<c.length;b++){var e=new Image();e.src=c[b];}}f.tracking_midpoint_tracked=true;}}if((g==((Math.floor(f.duration/2))+(Math.floor(f.duration/4))))){if(f.tracking_third_quartile_tracked==false){if(f.tracking_third_quartile!=null){var c=f.tracking_third_quartile.split("|");
for(var b=0;b<c.length;b++){var e=new Image();e.src=c[b];}}f.tracking_third_quartile_tracked=true;}}if((g>=(f.duration-1))){if(f.tracking_complete_tracked==false){if(f.tracking_complete!=null){var c=f.tracking_complete.split("|");
for(var b=0;b<c.length;b++){var e=new Image();e.src=c[b];}}f.tracking_complete_tracked=true;}manageVastPlayer.video_player.removeEventListener("timeupdate",manageVastPlayer.timeUpdate);
}},pingTrackingPixel:function(a){var b=new Image(1,1);b.src=a;},videoComplete:function(){var e=manageVastPlayer.vast_obj,a=manageVastPlayer.video_container,c=(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch),d=(c)?"touchend":"click";
if(e.static_end_card){var f=document.createElement("div"),b=document.createElement("img");f.id="manageEndCard";b.src=e.static_end_card;if(e.static_end_card_height&&e.static_end_card_width){b.width=e.static_end_card_width;
b.height=e.static_end_card_height;}a.innerHTML="";f.appendChild(b);a.appendChild(f);if(e.end_card_impression){manageVastPlayer.pingTrackingPixel(e.end_card_impression);
}if(MANAGE.adData.clickUrl&&e.end_card_clickthrough_url){manageVastPlayer.vast_click_url=MANAGE.adData.clickUrl+"&-ru="+encodeURI(e.end_card_clickthrough_url);
}else{if(MANAGE.adData.clickUrl){manageVastPlayer.vast_click_url=MANAGE.adData.clickUrl;}else{if(e.end_card_clickthrough_url){manageVastPlayer.vast_click_url=e.end_card_clickthrough_url;
}}}a.addEventListener(d,function(){manageVastPlayer.openSite(manageVastPlayer.vast_click_url);});}},buildVideo:function(){vast_obj=manageVastPlayer.vast_obj;
if(!vast_obj){return;}var c=document.createElement("div"),e=document.createElement("video"),d=(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch),b=(d)?"touchend":"click";
c.id="manageAd";e.id="manageVideo";e.setAttribute("webkit-playsinline","");e.setAttribute("autoplay","");if(vast_obj.media_file_webm){var a=document.createElement("source");
a.src=vast_obj.media_file_webm;a.type="video/webm";e.appendChild(a);}if(vast_obj.media_file_mp4){var h=document.createElement("source");h.src=vast_obj.media_file_mp4;
h.type="video/mp4";e.appendChild(h);}c.appendChild(e);document.body.appendChild(c);if(e.hasAttribute("controls")){e.removeAttribute("controls");}if(typeof(mraid)!=="undefined"){manageVastPlayer.buildCloseButton();
}manageVastPlayer.video_container=c;manageVastPlayer.video_player=e;manageVastPlayer.video_player.addEventListener("timeupdate",manageVastPlayer.timeUpdate);
manageVastPlayer.video_player.addEventListener("ended",manageVastPlayer.videoComplete);if(MANAGE.adData.clickUrl&&vast_obj.clickthrough_url){manageVastPlayer.vast_click_url=MANAGE.adData.clickUrl+"&-ru="+encodeURI(vast_obj.clickthrough_url);
}else{if(MANAGE.adData.clickUrl){manageVastPlayer.vast_click_url=MANAGE.adData.clickUrl;}else{if(vast_obj.clickthrough_url){manageVastPlayer.vast_click_url=vast_obj.clickthrough_url;
}}}manageVastPlayer.video_player.addEventListener(b,function(){if(vast_obj.clickthrough_tracking){manageVastPlayer.pingTrackingPixel(vast_obj.clickthrough_tracking);
}manageVastPlayer.openSite(manageVastPlayer.vast_click_url);});if(vast_obj.impression!=null){for(var f=0;f<vast_obj.impression.length;f++){manageVastPlayer.pingTrackingPixel(vast_obj.impression[f].childNodes[0].nodeValue);
}}manageVastPlayer.video_player.play();if(vast_obj.tracking_creative_view){var l=vast_obj.tracking_creative_view.split("|");for(var g=0;g<l.length;g++){var j=new Image();
j.src=l[g];}}},buildCloseButton:function(){var b=document.head||document.getElementsByTagName("head")[0],g=document.getElementById("manageAd"),e=document.createElement("div"),c=(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch),d=(c)?"touchend":"click";
e.id="manage-close";e.style.display="none";if(MANAGE.adData.customClose.position){e.classList.add(MANAGE.adData.customClose.position);}g.appendChild(e);
if(MANAGE.adData.customClose.style){var a=MANAGE.cssHost||"https://cdn.manage.com/assets/css/mraid/";var f=document.createElement("link");f.rel="stylesheet";
f.type="text/css";f.href=a+"close-"+MANAGE.adData.customClose.style+".css";f.media="all";b.appendChild(f);e.classList.add(MANAGE.adData.customClose.style);
}e.addEventListener(d,function(){if(typeof(mraid)!=="undefined"){mraid.close();}manageVastPlayer.video_player.pause();});},loadVast:function(b,a){this.vast_url=b;
try{var d=JSON.parse(a);if(d&&typeof d==="object"&&d!==null){this.vast_data=d;}}catch(c){}this.addMeta();this.addCss("manageAd");this.vastLoadEvent=new CustomEvent("vastLoadEvent");
window.addEventListener("vastLoadEvent",this.buildVideo,false);this.parseVast();},openSite:function(a){if(typeof(mraid)!=="undefined"){mraid.open(a);}else{window.location=a;
}},throwError:function(a){throw new Error(a);}};function mraidIsReady(){mraid.removeEventListener("ready",mraidIsReady);manageVastPlayer.loadVast(MANAGE.adData.vastUrl,MANAGE.adData.vastData);
}function doReadyCheck(){if(mraid.getState()=="loading"){mraid.addEventListener("ready",mraidIsReady);}else{manageVastPlayer.loadVast(MANAGE.adData.vastUrl,MANAGE.adData.vastData);
}}if(MANAGE.adData.vastUrl){if(typeof mraid!="undefined"){doReadyCheck();}else{window.addEventListener("DOMContentLoaded",function(){manageVastPlayer.loadVast(MANAGE.adData.vastUrl,MANAGE.adData.vastData);
});}}else{manageVastPlayer.throwError("Missing vastUrl");}